<% include ./partials/head %>
<style>
body{

}
td{
  text-align: center
}

#centered {
    margin: auto;
    width: 50%;
    padding: 10px;
}
</style>
<script src="/javascript/clientHomepageController.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.2/moment.min.js"></script>
<body ng-app="ClientHomePage" ng-controller="ClientHomePageController"background="http://www.modafinilsale.com/data/out/727/233440814-grey-wood.jpg">
    <div>
      <h3 style="text-align: center; font-size:40px; color:white;" class="lead">Welcome to the Midwest Realty Client Portal {{user.user.name}}!</h3>
    </div>

    <div align="center" class="panel" style="width:600px;" id="centered">
      <table class="table table-striped table-inverse table-responsive" style="padding-bottom:20px;">
  <caption style="text-align:center"><h2>Your Tickets</h2></caption>
  <thead>
    <th style="text-align:center;">Ticket Title</th>
    <th style="text-align:center;">Ticket Status</th>
  </thead>
  <tbody>
    <tr ng-repeat="ticket in ticketsForCompany track by $index" ng-if="ticket.status != 'Completed'">
      <td style="text-align:center;">{{ticket.tickettitle}}</td>
      <td ng-if=" ticket.status  == 'In Progress'"><span style="color:green"> {{ ticket.status }}</span></td>
      <td ng-if=" ticket.status  == 'not started'"><span style="color:red"> {{ ticket.status }}</span></td>
      <td ng-if=" ticket.status  == 'On Hold'" ><span style="color:orange"> {{ ticket.status }}</span></td>
    </tr>
  </tbody>
</table>
</div>

<div style="height:50px;"></div><!--create some space-->

<div class="panel" align="center" style="width:600px; " id="centered">
  <h2>Create New Ticket</h2>
  <div align="center" style="padding-bottom:20px;">
    <label class="lead" style="font-size:15px;"><b>Title</label><br>
    <input style="height:30px; border: .5px solid black;" type="text" ng-model="title" name="title" />
  </div>
  <div align="center" style="padding-bottom:20px;">
    <label class="lead" style="font-size:15px;"><b>Location of Issue<br>(Address)</label><br>
    <input style="height:30px; border: .5px solid black;" type="text" ng-model="location" name="location" />
  </div>
    <div align="center">
    <label class="lead" style=" font-size:15px;"><b>Explain Whats Going On</b></label><br>
    <textarea ng-model="description" style="width:500px;border: .5px solid black;" cols="80" rows="6" name="description" ></textarea>
  </div>
</div>
<div style="height:50px;"></div><!--create some space-->
  <div align="center" id="centered">
    <button ng-click="submitTicket()" class="btn btn-success">Submit Ticket</button>
    <button style="background-color:black; border:black; height:34px;" onclick="logOut(this)" class="btn btn-danger">Logout of Portal</button>
  </div>
</body>
</html>


<script>
var id = sessionStorage.getItem("userID");
function logOut(elem) {
  sessionStorage.removeItem("userID");
  sessionStorage.removeItem("SessionID");
  window.location.href = "/logout";
  }
</script>
